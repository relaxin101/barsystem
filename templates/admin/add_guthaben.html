{% extends "base.html" %}

{% block title %}Artikel bearbeiten{% endblock %}

{% block content %}
<h2>Artikel bearbeiten</h2>

<div class="form-container">
	{# -- GUTHABEN AUFLADEN (JavaScript-Teil und Modal hier belassen, da er nur für Admin-Seite relevant ist) -- #}
	<h2>Guthaben aufladen</h2>
	<form id="memberSearchFormAufladen">
	    <input type="text" id="search_term_aufladen" placeholder="Mitglied suchen...">
	    <button type="button" id="searchButtonAufladen">Suchen</button>
	    <button type="button" id="resetSearchButtonAufladen" style="display:none;">Alle anzeigen</button>
	</form>
	<div id="memberListAufladen" class="member-grid">
	    {# Hier werden Mitglieder dynamisch geladen oder initial von Flask übergeben #}
	    {% if alle_mitglieder_for_recharge %} {# Annahme: Flask übergibt hier die Mitglieder für die Aufladefunktion #}
		<script>
		    // Dies rendert die Mitglieder initial, wenn sie von Flask übergeben werden
		    document.addEventListener('DOMContentLoaded', () => {
			renderMembersForRecharge({{ alle_mitglieder_for_recharge | tojson | safe }});
		    });
		</script>
	    {% endif %}
	</div>

	<div id="rechargeModal" class="modal">
	    <div class="modal-content">
		<span class="close-button">&times;</span>
		<h2>Guthaben aufladen für: <span id="rechargeMemberName"></span></h2>
		<p>Aktueller Kontostand: <span id="rechargeMemberBalance"></span> €</p>
		<form id="rechargeForm">
		    <label for="amount">Betrag (€):</label>
		    <input type="number" id="amount" step="0.01" min="0.01" required>
		    <button type="submit">Aufladen</button>
		</form>
	    </div>
	</div>
</div>
{% endblock %}
